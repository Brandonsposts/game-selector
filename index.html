<!doctype html>
<html>
<!-- comment-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="author" content="co-authored by Brandon Post, Chase Terry">
    <title>Game Selector</title>
    
    <!-- JQuery Mobile Setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <!-- End JQuery Mobile Setup -->

    <script>
      //javascript
      //var gug;
      //gug = 5;
      //var LoopyDoopy = {death:"Help me, i'm dead", life:"but I am fine"};
      //var nameArray = [];
      
      //alert(LoopyDoopy.death);
      //  function fun(variable){
      //  return 3;
      // }
      function clickCounter(){
        alert("Still broken");
        if(hasLocalStorage()){
          if(localStorage.clickcount){
            alert("next");
            localStorage.clickcount = Number(localStorage.clickcount)+1;
          } 
          else{
            alert("first");
            localStorage.clickcount = 1;
          }
          document.getElementById("clickcount-index").innerHTML = "You have clicked the button " + localStorage.clickcount + " time(s).";
        }
        else{
          alert("No HTML5 Local Storage");
        }
        alert("pass through");
      }
      
      function hasLocalStorage(){
        if(typeof(Storage) !== "undefined"){
          //has local storage
          return true;
        }
        else{
          //does not have local storage
          return false;
        }
      }
      /*
      $(document).on("pageshow","#index",function(){
        if(hasLocalStorage()){
          if(localStorage.clickcount){
          } 
          else{
            localStorage.clickcount = 0;
          }
          document.getElementById("clickcount-index").innerHTML = "You have clicked the button " + localStorage.clickcount + " time(s).";
          alert("show");
        }
        else{
          alert("No HTML5 Local Storage");
        }
        });
        */
        function random(min,max){
          return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        function getGameList(){
          return JSON.parse(localStorage.database);
        }
        function randomGame(){
          var games = getGameList();
          var text = "Game: ";
          var playerInfo = "Players: ";
          var duration = "Duration: ";
          x = random(0,games.length - 1);
          var displayTitle = document.getElementById("game-spot");
          var displayDuration = document.getElementById("pladur-spot");
          //duration = duration + games[x].duration;
          playerInfo = playerInfo + games[x].minPlayer + "-" + games[x].maxPlayer;
          text = text + games[x].name;
          displayTitle.innerHTML = text;
          displayDuration.innerHTML = duration + playerInfo;
        }
        function selectGame(){
          var title = document.getElementById("game-spot").innerHTML;
          document.getElementById("title-spot").innerHTML = title;
        }
    </script>
  </head>
  <body>
    <!-- main html -->
    <div data-role="page" id="#index">
      <div data-role="header">
        <h1>Game Selector</h1>
      </div><!-- /header -->
      <div data-role="navbar" class="header">
        <ul>
          <li><a href="data.html" data-transition="slide" data-direction="reverse" rel="external">Data</a></li>
          <li><a href="index.html" data-transition="fade" class="ui-btn-active ui-state-persist">Home</a></li>
          <li><a href="extras.html" data-transition="slide" rel="external">Extras</a></li>
        </ul>
      </div>
      
      
      
      <div data-role="content">
        <!--
        <h3>Local Storage testing</h3>
        <p id="clickcount-index">Hello</p>
        <p><a data-role="button" data-inline="true" onclick="clickCounter();">Increase Counter!</a></p> 
        -->
        <p>Hello! Edit your list of games in the "Data" tab, and come back here to randomize!</p>
        <a onclick="randomGame();" data-role="button" data-inline="true" data-transition="fade">Random Game!</a>
        <p id="game-spot"> </p>
        <p id="pladur-spot"> </p>
        <p id="type-spot"> </p>
        <a href="#gameselected" onclick="selectGame();" data-role="button" data-inline="true" data-transition="fade">Select this Game!</a>
      </div><!-- /content -->
    </div><!-- /page -->
    
    
        <div data-role="page" id="gameselected">
      <div data-role="header">
        <h1>Game Selector</h1>
      </div><!-- /header -->
      <div data-role="navbar" class="header">
        <ul>
          <li><a href="data.html" data-transition="slide" data-direction="reverse" rel="external">Data</a></li>
          <li><a href="index.html" data-transition="fade" class="ui-btn-active ui-state-persist">Home</a></li>
          <li><a href="extras.html" data-transition="slide" rel="external">Extras</a></li>
        </ul>
      </div>
      
      <div data-role="content">
        <!--
        <h3>Local Storage testing</h3>
        <p id="clickcount-index">Hello</p>
        <p><a data-role="button" data-inline="true" onclick="clickCounter();">Increase Counter!</a></p> 
        -->
        <p id="title-spot"> </p>
          <a href="#popPerson" data-role="button" data-rel="popup" data-inline="true" data-position-to="window">First Person</a>
          <a href="#popPoints" data-role="button" data-inline="true">Points</a>
          <a href="#popDice" data-role="popup" data-inline="true" data-position-to="window">Dice</a>
          <div data-role="popup" id="popPoints">
           <p>Points</p>
          </div>
         <div data-role="popup" id="popPerson">
           <p>First Person</p>
         </div>
         <div data-role="popup" id="popDice">
        <p>This is the dice!</p>
        <a onclick="rolldie(6);" data-role="button" data-inline="true" data-transition="none">Roll D6</a>
        <a onclick="rolldie(20);" data-role="button" data-inline="true" data-transition="none">Roll D20</a>
        <a onclick="rolldie(4);" data-role="button" data-inline="true" data-transition="none">Roll D4</a>
        <p id="number-spot" size="24">0</p>
         </div>
      </div><!-- /content -->
    </div><!-- /page -->
  </body>
</html>
